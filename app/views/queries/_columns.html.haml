%table.query-columns
  %tr
    %td{:style => "padding-left:0"}
      = label_tag "available_columns", l(:description_available_columns)
      %br/
      = select_tag 'available_columns',                                                        |
        options_for_select(query_available_inline_columns_options(query)),                     |
        :multiple => true, :size => 10, :style => "width:150px",                               |
        :ondblclick => "moveOptions(this.form.available_columns, this.form.selected_columns);" |
    %td.buttons
      %input{:onclick => "moveOptions(this.form.available_columns, this.form.selected_columns);", :type => "button", :value => "→"}/
      %br/
      %input{:onclick => "moveOptions(this.form.selected_columns, this.form.available_columns);", :type => "button", :value => "←"}/
    %td
      = label_tag "selected_columns", l(:description_selected_columns)
      %br/
      = select_tag tag_name,                                                                   |
        options_for_select(query_selected_inline_columns_options(query)),                      |
        :id => 'selected_columns', :multiple => true, :size => 10, :style => "width:150px",    |
        :ondblclick => "moveOptions(this.form.selected_columns, this.form.available_columns);" |
    %td.buttons
      %input{:onclick => "moveOptionTop(this.form.selected_columns);", :type => "button", :value => "⇈"}/
      %br/
      %input{:onclick => "moveOptionUp(this.form.selected_columns);", :type => "button", :value => "↑"}/
      %br/
      %input{:onclick => "moveOptionDown(this.form.selected_columns);", :type => "button", :value => "↓"}/
      %br/
      %input{:onclick => "moveOptionBottom(this.form.selected_columns);", :type => "button", :value => "⇊"}/
= javascript_tag do
  $(document).ready(function(){
  $('.query-columns').closest('form').submit(function(){
  $('#selected_columns option').prop('selected', true);
  });
  });
